<!doctype html>
<html >
<head>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!--[if lt IE 9]>
                <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
        <![endif]-->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />

    <!-- <link rel="stylesheet" type="text/css" href="template.css" /> -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/template.css" />

    <link href="https://vjs.zencdn.net/5.4.4/video-js.css" rel="stylesheet" />

    <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
    <!-- <script type='text/javascript' src='menu/js/jquery.cookie.js'></script> -->
    <!-- <script type='text/javascript' src='menu/js/jquery.hoverIntent.minified.js'></script> -->
    <!-- <script type='text/javascript' src='menu/js/jquery.dcjqaccordion.2.7.min.js'></script> -->

    <!-- <link href="menu/css/skins/blue.css" rel="stylesheet" type="text/css" /> -->
    <!-- <link href="menu/css/skins/graphite.css" rel="stylesheet" type="text/css" /> -->
    <!-- <link href="menu/css/skins/grey.css" rel="stylesheet" type="text/css" /> -->
  
    <!-- <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
        
  
    <!-- <script src="script.js"></script> -->
  
    <!-- <script src="jquery.sticky-kit.js "></script> -->
    <script type='text/javascript' src='https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/js/jquery.cookie.js'></script>
    <script type='text/javascript' src='https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/js/jquery.hoverIntent.minified.js'></script>
    <script type='text/javascript' src='https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/js/jquery.dcjqaccordion.2.7.min.js'></script>

    <link href="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/css/skins/blue.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/css/skins/graphite.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/css/skins/grey.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/gh/ryangrose/easy-pandoc-templates@948e28e5/css/elegant_bootstrap.css" rel="stylesheet" type="text/css" />
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  
    <script src="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/script.js"></script>
  
    <script src="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/jquery.sticky-kit.js"></script>
    <meta name="generator" content="pandoc" />
  <title>DevOps summary</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>

    
    <div class="navbar navbar-static-top">
    <div class="navbar-inner">
      <div class="container">
        <span class="doc-title">DevOps summary</span>
        <ul class="nav pull-right doc-info">
                            </ul>
      </div>
    </div>
  </div>
    <div class="container">
    <div class="row">
            <div id="TOC" class="span3">
        <div class="well toc">

        <ul>
        <li><a href="#summary-devops" id="toc-summary-devops">Summary
        DevOps</a>
        <ul>
        <li><a href="#what-is-devops" id="toc-what-is-devops">1. What is
        DevOps?</a>
        <ul>
        <li><a href="#traditional-development-teams-before-devops"
        id="toc-traditional-development-teams-before-devops">Traditional
        development teams (before DevOps)</a></li>
        <li><a href="#devops-core-values"
        id="toc-devops-core-values">DevOps core values</a></li>
        <li><a href="#continuous-deliverydeployment"
        id="toc-continuous-deliverydeployment">Continuous
        delivery/deployment</a></li>
        <li><a href="#cicd-tooling" id="toc-cicd-tooling">CI/CD
        Tooling</a></li>
        <li><a href="#reliablility-engineering"
        id="toc-reliablility-engineering">Reliablility
        Engineering</a></li>
        <li><a href="#devsecops" id="toc-devsecops">DevSecOps</a></li>
        </ul></li>
        <li><a href="#container-technology"
        id="toc-container-technology">2. Container Technology</a>
        <ul>
        <li><a href="#virualisatoin-vms-and-containers"
        id="toc-virualisatoin-vms-and-containers">2.1 Virualisatoin:
        VM‚Äôs and containers</a></li>
        <li><a href="#container-technologies"
        id="toc-container-technologies">2.2 Container
        Technologies</a></li>
        <li><a href="#container-managementorchestration"
        id="toc-container-managementorchestration">2.3 Container
        Management/Orchestration</a></li>
        <li><a href="#container-ecosystem-discussion"
        id="toc-container-ecosystem-discussion">2.4 Container Ecosystem
        Discussion</a></li>
        </ul></li>
        <li><a href="#kubernetes" id="toc-kubernetes">3. Kubernetes</a>
        <ul>
        <li><a href="#decoupled-infrastructure-and-scaling"
        id="toc-decoupled-infrastructure-and-scaling">3.1 Decoupled
        infrastructure and scaling</a></li>
        <li><a href="#kubernetes-key-concepts"
        id="toc-kubernetes-key-concepts">3.2 Kubernetes Key
        Concepts</a></li>
        <li><a href="#kubernetes-architecture"
        id="toc-kubernetes-architecture">3.3 Kubernetes
        Architecture</a></li>
        </ul></li>
        </ul></li>
        </ul>

        </div>
      </div>
            <div class="span9">

      
      <h1 id="summary-devops">Summary DevOps</h1>
<h2 id="what-is-devops">1. What is DevOps?</h2>
<p>Practice of operations and development engineers participating
<em>together</em> in the entire service lifecycle from design through
development to production support. Whit the goal of improving and
shortening the systems development lifecycle.</p>
<figure>
<img src="./img/devops.png" alt="Devops lifecycle" />
<figcaption aria-hidden="true">Devops lifecycle</figcaption>
</figure>
<h3 id="traditional-development-teams-before-devops">Traditional
development teams (before DevOps)</h3>
<ul>
<li>Development teams
<ul>
<li>Requirement analysis</li>
<li>Software design</li>
<li>Planning</li>
<li>Software implementation</li>
<li>Testing</li>
</ul></li>
<li>Operation teams
<ul>
<li>Receives application from dev team</li>
<li>Deploy app on infrastructure</li>
<li>Manage infrastructure</li>
<li>Monitoring</li>
<li>Support</li>
</ul></li>
</ul>
<p>This approach led to a lot of <em>operation mismatch</em>:</p>
<ul>
<li>Defects released to production</li>
<li>Hard to diagnose issues quickly</li>
<li>Finger pointing</li>
<li>‚Ä¶</li>
</ul>
<h3 id="devops-core-values">DevOps core values</h3>
<ol type="1">
<li>Culture and People &gt; Process and tools
<ul>
<li>Poeple become product owners, give them trust and
responsibility</li>
</ul></li>
<li>Automation (infrastructure as code)
<ul>
<li>Automation is critical as things need to move fast</li>
</ul></li>
<li>Measurement (measure everything)
<ul>
<li>Knowledge of system is key</li>
<li>Know when and why things go wrong</li>
</ul></li>
<li>Sharing - collaboration - feedback
<ul>
<li>Sharing knowledge between Devs and Ops</li>
</ul></li>
</ol>
<h3 id="continuous-deliverydeployment">Continuous
delivery/deployment</h3>
<ul>
<li><strong>Continuous integration</strong>: build and test</li>
<li><strong>Continuous delivery</strong>: deploy and integration
test</li>
<li><strong>Continuous deployment</strong>: build, test, deploy,
integration test and deploy to prod</li>
</ul>
<blockquote>
<p>üí°: Best practices</p>
<ul>
<li>Build should pass within 5 min (‚òï coffee test)</li>
<li>Commit small bits</li>
<li>Do not leave build broken</li>
<li>Deployment should go to a copy of production (üöß staging) before
production</li>
</ul>
</blockquote>
<figure>
<img src="./img/continuous-development-deployment.png"
alt="Continuous delivery/deployment" />
<figcaption aria-hidden="true">Continuous
delivery/deployment</figcaption>
</figure>
<h4 id="automated-testing-for-continuous-deployment">Automated testing
for continuous deployment</h4>
<ul>
<li>Unit tests: Test individual components of code</li>
<li>Integration tests: Test how components work together</li>
<li>Crossbrowser, performance, security tests</li>
</ul>
<h3 id="cicd-tooling">CI/CD Tooling</h3>
<ul>
<li><strong>Version control</strong>: Git, BitBucket</li>
<li><strong>CI systems</strong>: Jenkins, TravisCI</li>
<li><strong>Build</strong>: Make, Maven, Packer</li>
<li><strong>Test</strong>: Junit, Cucumber</li>
<li><strong>Artifact repository</strong>: Dockerhub, Artifactory</li>
<li><strong>Deployment</strong>: Ansible</li>
</ul>
<h3 id="reliablility-engineering">Reliablility Engineering</h3>
<p>The goal is to have no down-time, design patterns exist for creating
resilient systems.</p>
<p>The key is to: Build - Measure - Learn - Repeat!</p>
<h4 id="chaos-engineering">Chaos Engineering</h4>
<p>Chaos Engineering is a discipline that aims to proactively test and
improve a system‚Äôs resilience to unexpected and turbulent conditions. It
involves deliberately introducing controlled and planned disruptions
into a software or system environment to observe how the system responds
under stress.</p>
<dl>
<dt><strong>Chaos monkey</strong></dt>
<dd>
Introduce random failures in production and see how resilient system is,
or how fast ingeneers can act upon this problem.
</dd>
</dl>
<h3 id="devsecops">DevSecOps</h3>
<p>Extension of DevOps that includes security from the get-go</p>
<ul>
<li><strong>Secure Coding</strong>: Responsibility of the devs to write
secure code.</li>
<li><strong>Security testing tools integrated in CI/CD
pipeline</strong>: eg. scanning dependencies/containers for
vulnerabilities</li>
<li><strong>Shift-left testing</strong>: Software testing is pefromed
earlier in lifecycle.</li>
</ul>
<h4 id="tools-to-implement-devsecops">Tools to implement DevSecOps</h4>
<ul>
<li><strong>SAST - Static Applicaiton Security Testing</strong>
<ul>
<li>Scan proprietary/custom code for erros</li>
<li>During the code, build and dev phases of the lifecycle</li>
</ul></li>
<li><strong>SCA - Software Component Analysis</strong>
<ul>
<li>Scan source code and libraries for known vulnerabilities</li>
<li>Provide insight of security and licence risks</li>
<li>Integrates seamlessly into CI/CD pipeline</li>
</ul></li>
<li><strong>IAST - Interactive Application Security Testing</strong>
<ul>
<li>Work in the background during tests to analyze runtime behavior</li>
<li>Observe request/response integration</li>
<li>Detect runtime vulnerabilities</li>
</ul></li>
<li><strong>DAST - Dynamic Application Security Testing</strong>
<ul>
<li>Automated black box testing -&gt; mimic how hacker would approach
your system</li>
</ul></li>
</ul>
<h2 id="container-technology">2. Container Technology</h2>
<h3 id="virualisatoin-vms-and-containers">2.1 Virualisatoin: VM‚Äôs and
containers</h3>
<p><strong>Why is there a need to containerize testing and
deployment?</strong></p>
<ul>
<li>Operation teams must set-up a variety of different runtime engines,
deal with versionning, ‚Ä¶</li>
<li>No ability to constrain resources consumed by a single service
instance</li>
<li>Lack of isolation between multiple instances on the same
machine</li>
</ul>
<h4 id="virtual-machine-images">Virtual Machine Images</h4>
<ul>
<li>‚úÖ: Encapsulation and isolation</li>
<li>‚úÖ: Virtual hardware</li>
<li>‚ùå: Less efficient resource utilization</li>
<li>‚ùå: Slow deployments</li>
</ul>
<h4 id="host-virtualization-vurtual-machines-and-containers">Host
Virtualization: Vurtual Machines and Containers</h4>
<dl>
<dt><strong>Hardware virtualization</strong></dt>
<dd>
Hypervisor arbitrates access to shared hardware. VM‚Äôs are completely
isolated, each VM requires its own OS
</dd>
</dl>
<figure>
<img src="./img/hw-virtualization.png" alt="Hardware Virtualization" />
<figcaption aria-hidden="true">Hardware Virtualization</figcaption>
</figure>
<dl>
<dt><strong>Sofware virtualization</strong></dt>
<dd>
OS kernel allows multiple process spaces. Containers share the host OS
kernel, each container has its own root file system.
</dd>
</dl>
<figure>
<img src="./img/sw-virtualization.png" alt="Software Virtualization" />
<figcaption aria-hidden="true">Software Virtualization</figcaption>
</figure>
<h4 id="container-as-deployable-artifact">Container as deployable
artifact</h4>
<figure>
<img src="./img/container-architecture.png"
alt="Container architecture" />
<figcaption aria-hidden="true">Container architecture</figcaption>
</figure>
<ul>
<li>Encapsulation</li>
<li>Isolation</li>
<li>Resource contraints</li>
<li>No virt hardware</li>
<li>lightweight</li>
<li>fast boot</li>
</ul>
<h3 id="container-technologies">2.2 Container Technologies</h3>
<h4 id="lxclxd">LXC/LXD</h4>
<p><strong>LXC</strong>: Containers build into the Linux kernel.
Low-level and difficult to configure.</p>
<p><strong>LXD</strong>: Next generation, build on top of LXC, locked in
the Canonical ecosystem.</p>
<h4 id="docker">Docker</h4>
<ul>
<li>Can be thought of as a software logistics provider tool (installing,
removeing, upgrading and running software)</li>
<li>Docker CLI + Deamon
<ul>
<li>Builds images, runs and manages containers + REST API</li>
<li>Containers can only access their own memory and resources</li>
</ul></li>
</ul>
<figure>
<img src="./img/docker-architecture.png" alt="Docker Architecture" />
<figcaption aria-hidden="true">Docker Architecture</figcaption>
</figure>
<p>Container = software that has to get started</p>
<p>Container-image = All the configuration necessary to start the
container</p>
<h5 id="handling-application-dependencies">Handling application
dependencies</h5>
<p>Without containers, application use the same dependencies (the ones
located on the host computer). This can become problematic if different
applications require different versions of the dependencies.</p>
<p>When using docker, every container will have it‚Äôs own copy of the
required dependencies.</p>
<h5 id="namespaces-environment-independence">Namespaces / Environment
independence</h5>
<ul>
<li>Every running program or container has a unique <em>PID</em></li>
<li>PID namespace is set of unique numbers that identify processes
<ul>
<li>Host can have multiple PID namespaces</li>
<li>Each PID namespace contains its own PID‚Äôs</li>
<li>Docker created new PID namespace for each container</li>
</ul></li>
<li>Docker provides <strong>environment independence</strong>
<ul>
<li>Within docker, you can run everything independent of other processes
on the computer (eg: you don‚Äôt have to care about existing PID‚Äôs or
other open ports on system)</li>
</ul></li>
</ul>
<h5 id="environment-agnostic">Environment-Agnostic</h5>
<ol type="1">
<li>Read-only file systems
<ul>
<li>Attacker can not compromise files in the container</li>
<li>Confidence container will not change after changes to the files it
contains</li>
</ul></li>
<li>Environment variable injection
<ul>
<li>Docker <code>env</code> command can be used to inject variables
(like credentials) into the container</li>
</ul></li>
<li>Volumes</li>
</ol>
<h5 id="container-states">Container states</h5>
<figure>
<img src="./img/container-states.png" alt="Docker container states" />
<figcaption aria-hidden="true">Docker container states</figcaption>
</figure>
<h5 id="os-layers-in-containers">OS layers in containers</h5>
<dl>
<dt><strong>Why is there an OS-layer in a docker container</strong></dt>
<dd>
Containers contain a very minimalistic version of an OS. This layer is
called the <code>Base Layer</code>. This layer contains essentials to
run the application (like a file system, network, ‚Ä¶). Developers can
choose which Base they want (centos, busybox, scratch, ‚Ä¶)
</dd>
</dl>
<p>Windows hosts can also have an additional layer for a hypervisor, in
this case, every container receives its own Hyper-V kernel.</p>
<figure>
<img src="./img/docker-hyper-v.png"
alt="Docker container with Hyper-V" />
<figcaption aria-hidden="true">Docker container with
Hyper-V</figcaption>
</figure>
<blockquote>
<p>üí°: Containers with Hyper-V are also a bit safer. When an attacker
gets access to the kernel, it will only access the virtual Hyper-V
kernel.</p>
</blockquote>
<h5 id="building-container-with-dockerfile">Building container with
Dockerfile</h5>
<p>Containers can be made using a <code>Dockerfile</code> configuration
file</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>FROM ubuntu:14.04       // Base image</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>COPY html /var/www/html // Copy files from host to container</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>ADD web-page-config.tar // Similar to COPY bur for tar and remote URL</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>ENV APACHE_LOG_DIR /var/log/apahce    // Set env varialbe</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>USER 73                 // Set userid in the image</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>EXPOSE 7373/udp 8080    // Expose network ports</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>RUN apt update -y       // Run bash command</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>ENTRYPOINT [&quot;echo&quot;, &quot;Dockerfile demo&quot;]  // Run when container starts</span></code></pre></div>
<h5 id="container-vs-image">Container vs Image</h5>
<p>When starting a container from an image, Docker engine will add
another layer. This layer will store information added to the container
while it was running. If container gets restarted this information will
be gone again.</p>
<h5 id="union-file-system">Union file system</h5>
<p>Some layers in a docker image (like the base layers) have their own
read-only file-system. On top of that, Docker Engine adds another
read-write file-system when building the container. These different
layers get merged into one virtual layer (=
<strong>UnionFS</strong>).</p>
<figure>
<img src="./img/unionFS.png" alt="UnionFS" />
<figcaption aria-hidden="true">UnionFS</figcaption>
</figure>
<dl>
<dt><strong>Copy-on-write</strong></dt>
<dd>
Only copy file to upper layer that have been modified, this reduces
space and startup time.
</dd>
</dl>
<h3 id="container-managementorchestration">2.3 Container
Management/Orchestration</h3>
<p><strong>What does an orchestration framework do?</strong></p>
<p>It automates deployment, interconnection, scaling and maintenance of
multiple containers on a cluster of nodes.</p>
<p>Some container orchestration systems:</p>
<ul>
<li>Kubernetes</li>
<li>Docker orchestration</li>
<li>Amazon EC2</li>
</ul>
<h3 id="container-ecosystem-discussion">2.4 Container Ecosystem
Discussion</h3>
<h4 id="low-level">Low-level</h4>
<ul>
<li><strong>Low-level runtime</strong>:
<ul>
<li>Can: spin up a container and connect it to existing network</li>
<li>Can‚Äôt: create network, manage images, prepare environment for
container and manage local/persistent storage</li>
</ul></li>
<li>Main approaches (OCI runtime-spec compatible)
<ul>
<li>runc: cli tools for spanning and running OS-level virt
container</li>
<li>kata-runtime: cli tool for spanning hardare-virt container (focus:
security)</li>
</ul></li>
</ul>
<h4 id="high-level-runtime">High-level runtime</h4>
<p><strong>High-level runtime</strong>: deals with creating the network,
managing images, perparing environment, and managing local/persistent
storage</p>
<ul>
<li>Main approaches (CRI-compatible)
<ul>
<li>Containerd: controlled by CNCF</li>
<li>CRI-O: bridge between Kubernetes and OCI-compliant runtimes by
RedHat (default in OpenShift)</li>
<li>Docker</li>
</ul></li>
</ul>
<h4 id="high-level-management">High-level management</h4>
<p><strong>High-level container management</strong>: deals with
orchestrating containers on infrastructure</p>
<ul>
<li>Main approaches:
<ul>
<li>Kubernetes (<em>de-facto</em>)</li>
<li>Docker</li>
<li>Podman (RedHat)</li>
</ul></li>
</ul>
<figure>
<img src="./img/container-ecosystem.png"
alt="Current container ecosystem" />
<figcaption aria-hidden="true">Current container ecosystem</figcaption>
</figure>
<h4 id="conclusion">Conclusion</h4>
<ul>
<li>Container: go-to for micro-services
<ul>
<li>Rapid scaling</li>
<li>lightweight</li>
<li>Can run anywhere</li>
</ul></li>
<li>Container tech options
<ul>
<li>Dockerfiles</li>
<li>Docker compose</li>
</ul></li>
<li>Container orchestration
<ul>
<li>Kubernetes is the de-facto standard</li>
</ul></li>
<li>Fractured ecosystem</li>
</ul>
<hr />
<h2 id="kubernetes">3. Kubernetes</h2>
<dl>
<dt><strong>Kubernetes</strong></dt>
<dd>
Orchestration technology that abstracts the underlying hardware of the
nodes and provides a uniform interface for workload to be deployed and
to consume the shared resource pool.
</dd>
</dl>
<blockquote>
<p>üí°: Kubernetes works <strong>declarative</strong> -&gt; you declare
what you want and kubernetes figures out the steps to get there</p>
</blockquote>
<h3 id="decoupled-infrastructure-and-scaling">3.1 Decoupled
infrastructure and scaling</h3>
<ul>
<li>All services within kubernetes are <strong>load balanced</strong>
-&gt; easy to upscale</li>
<li><strong>Self-healing</strong> and seamless upgrades and
rollbacks</li>
<li>Auto schedule pods based on their resource needs</li>
<li>Autoscale workloads: makes more instances of container if
needed</li>
<li>Blue/green deployment: runs two environments at once.
<ul>
<li>Blue: live environment</li>
<li>Green: Once new software is ready, switch traffic to green, and blue
becomes idle.</li>
</ul></li>
<li>Fire off jobs and schedules cronjobs (eg. auto remove n-elements
from log file after n minutes)</li>
<li>Manage stateless and stateful apps</li>
<li>! use the same API across bare metal and every cloud provider</li>
</ul>
<h3 id="kubernetes-key-concepts">3.2 Kubernetes Key Concepts</h3>
<h4 id="pods">Pods</h4>
<ul>
<li>Smallest unit of work of Kubernetes</li>
<li>Pods can contain one or more containers, they share volumes,
network, namespace and are part of a single context.</li>
<li>Serve as a unit of deployment, horizontal scaling and replication
<ul>
<li>Pods should remain small, usually a main containers per pod plus
required sidecar containers</li>
</ul></li>
<li>Are REST objects</li>
<li>Are Ephemeral (they can be destroyed anytime and not have fixed
network addresses)</li>
<li>Can have labels, specifying attributes meaningful to user</li>
</ul>
<figure>
<img src="./img/pod.png" alt="Pod architecture" />
<figcaption aria-hidden="true">Pod architecture</figcaption>
</figure>
<h4 id="services">Services</h4>
<ul>
<li>Abstraction which defines a logical set of pods and a policy by
which to access them</li>
<li>Durable resource (no dynamic startups and shutdowns)
<ul>
<li>Static cluster IP</li>
<li>static namespaced DNS name</li>
</ul></li>
<li>Services are also REST objects</li>
<li>Services is an internal load balancer to pods</li>
</ul>
<figure>
<img src="./img/k8s-services.png" alt="Kubernetes services" />
<figcaption aria-hidden="true">Kubernetes services</figcaption>
</figure>
<dl>
<dt><strong>Service registry</strong></dt>
<dd>
Database of services, their instances and their locations. Instances are
registered on startup and removed on shutdown.
</dd>
</dl>
<h5 id="zero-downtime-upgrade-techniques">Zero-downtime upgrade
techniques</h5>
<ol type="1">
<li><strong>Rolling update</strong>
<ul>
<li><figure>
<img src="./img/service-rolling-update.png" alt="Rolling update" />
<figcaption aria-hidden="true">Rolling update</figcaption>
</figure></li>
</ul></li>
<li><strong>Canary release</strong>: Have a small numbers of users test
the new version
<ul>
<li><figure>
<img src="./img/service-canary-release.png" alt="Canary release" />
<figcaption aria-hidden="true">Canary release</figcaption>
</figure></li>
</ul></li>
<li><strong>A/B testing</strong>: Users randomly get a version, collect
business metrics (rather than technical testing)
<ul>
<li><figure>
<img src="./img/service-a-b-testing.png" alt="A/B testing" />
<figcaption aria-hidden="true">A/B testing</figcaption>
</figure></li>
</ul></li>
</ol>
<h3 id="kubernetes-architecture">3.3 Kubernetes Architecture</h3>
<figure>
<img src="./img/kubernetes-architecture.png"
alt="Kubernetes Architecture" />
<figcaption aria-hidden="true">Kubernetes Architecture</figcaption>
</figure>
<h4 id="control-plane">Control Plane</h4>
<figure>
<img src="./img/kubernetes-ctrl-plane.png" alt="Control Plane" />
<figcaption aria-hidden="true">Control Plane</figcaption>
</figure>
<h5 id="kube-controller-manager">Kube-controller-manager</h5>
<ul>
<li>Primary service/daemon that manages all core component control
groups</li>
<li>Monitors the cluster state via API server</li>
<li>Steer cluster to desired state</li>
</ul>
<h5 id="kube-scheduler">Kube-scheduler</h5>
<ul>
<li>Policy-rich engine, tries to place workload on matching resource
<ul>
<li>Decides which nodes should run which pods</li>
</ul></li>
<li>Select node for pods to run on</li>
<li>Workload requirements example
<ul>
<li>labels</li>
<li>Affinity/anti-affinity (which services should be grouped)</li>
<li>HW requirements</li>
</ul></li>
</ul>
<h5 id="cloud-control-manager">Cloud-Control-Manager</h5>
<ul>
<li>Daemon that provides cloud-provider specific integration into
kubernetes core loop</li>
<li>Controllers inside cloud-control-manager
<ul>
<li>Node controller: created new Node objects when new servers are
created</li>
<li>Route controller: configures routes in the cloud</li>
<li>Service controller: integration with load balancers, IP address
assignment, health checks</li>
</ul></li>
</ul>
<h4 id="node">Node</h4>
<dl>
<dt><strong>Node</strong></dt>
<dd>
component of the cluster that serves as a worker machine. It can be
either a physical machine or a virtual machine and is responsible for
running applications, handling containerized workloads, and providing
resources necessary for running those workloads
</dd>
</dl>
<figure>
<img src="./img/kubernetes-node.png" alt="Kubernetes Node" />
<figcaption aria-hidden="true">Kubernetes Node</figcaption>
</figure>
<h5 id="kubelets">Kubelets</h5>
<ul>
<li>Node agent responsible for managing the lifecycle of every pod on
its host</li>
<li>Registers node with API server</li>
<li>Kubelet interprets YAML pod manifest</li>
</ul>
<h5 id="container-runtime-engine">Container Runtime Engine</h5>
<ul>
<li>CRI (Container Runtime Interface) compatible application that
executes ans manages containers</li>
<li>Supports different container runtimes (Docker, Kata, Containerd,
‚Ä¶)</li>
</ul>
<h5 id="kube-proxy">Kube-proxy</h5>
<ul>
<li>Manages the network rules on each node</li>
<li>Performs connection forwarding or load balancing for Kubernetes
services</li>
</ul>
<hr />
            </div>
    </div>
  </div>
  <script src="https://vjs.zencdn.net/5.4.4/video.js"></script>

</body>
</html>
